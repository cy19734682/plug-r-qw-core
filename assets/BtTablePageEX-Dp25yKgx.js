import{d as K,j as r,k as _,o as Q,c as H,f as l,S as L,b as x,w as f,g as k,t as Y,e as o,l as c,m as S,n as v,q as Z,s as ee,F as te,x as ae,y as oe,z as le,A as V,i as u,B as y,$ as B,C as ne,D as O,E as ie,G as se,_ as re}from"./index-DX8Te6x7.js";import{_ as ce}from"./testImg-BDb5uRE2.js";import{N as ue}from"./NodeServeInfo-BqDYghmc.js";const de={class:"flexColumnBox"},me={class:"growFlexItem"},fe={class:"topBoxKAQ"},pe=K({__name:"BtTablePageEX",setup(ve){const m=r(),n=r(),p=r("new"),d=r(!1),i=r("radio"),C=r(0),R=r({});let b=[];const T=[{title:"ID",key:"id",width:80},{title:"文件名称",key:"name",minWidth:250,tooltip:!0,render:(e,t)=>e("span",{class:"link",onClick:()=>{ae("模拟文件下载",ce)}},oe("name",!0)(e,t))},{title:"文件类型",minWidth:120,key:"mimeType"},{title:"文件大小",minWidth:100,key:"size"},{title:"备注",minWidth:200,key:"remark"},{title:"操作",width:240,render:(e,t)=>e("div",[e("span",{...le("abc")},"123"),e(V,{icon:"ios-create",title:"编辑",onClick:()=>{d.value?(p.value="edit",m.value.updateValGroup(t.row),m.value.setItemToValGroup({id:t.row.id},!0),m.value.open()):u("提示","仅在node-serve模式下可执行编辑","info")}}),e(V,{icon:"ios-trash",title:"删除",onClick:()=>{y({content:"确定模拟执行删除操作？",onOk:()=>{d.value?B.delete("/node-serve/bt-table-page",{id:t.row.id}).then(a=>{(a==null?void 0:a.code)===0?(u("删除成功","","success"),D()):u("删除失败","","error")}):ne(()=>{u("成功","假装删除成功","success")},500)}})}})])}],P=[{type:"txt",val:"正常的文件系统应该是上传文件，我们这里只是演示btTablePage使用方法，手动填写这些字段就行",label:"说明"},{type:"input",key:"name",label:"文件名称"},{type:"inputNumber",key:"size",label:"文件大小",min:0},{type:"input",key:"mimeType",label:"文件类型"},{type:"textarea",key:"remark",label:"备注"}],G={name:{required:!0},size:{required:!0},mimeType:{required:!0}},N=_(()=>d.value?"/node-serve/bt-table-page":location.pathname+"testData/btTablePage.json"),h=_(()=>p.value==="new"?"新增":"编辑"),$=_(()=>p.value==="new"?"post":"put");let g=r([]),w=null;function M(e,t){let a=n.value.dataS,s=a.splice(e,1);a.splice(t,0,...s),O(function(){n.value.dataS=a})}function E(){n.value.clearSelect()}function F(){d.value?(p.value="new",m.value.open()):u("提示","仅在node-serve模式下可执行新增","info")}function I(e){e&&B[$.value]("/node-serve/bt-table-page",e).then(t=>{(t==null?void 0:t.code)===0?(u(h.value+"成功","","success"),p.value==="new"?z():n.value.getDataAndClickRow(!0),m.value.close()):u(h.value+"失败","","error")})}function D(){O(function(){n.value.getTableData()})}function q(){console.log(n.value.getSelected()),u("请在控制台查看已选数据","","success")}function z(e){e||(e={}),R.value=ie(e)}function W(e,t){console.log("row click-->",e,t)}function A(e){var t,a;C.value=(e==null?void 0:e.total)||((t=e==null?void 0:e.data)==null?void 0:t.total)||0,b=((a=e==null?void 0:e.data)==null?void 0:a.records)||(e==null?void 0:e.data)||[]}function j(){se.print(T,b,"表格打印示例",{autoPrint:!0})}function U(e){let t=[];const a=i.value==="radio";for(let s=0;s<b.length;s++)t.push(e(a?c.Radio:c.Checkbox,{label:s},()=>b[s].id));return e(a?c.RadioGroup:c.CheckboxGroup,{modelValue:a?w:g.value,onOnChange(s){a?w=s:g.value=s}},()=>t)}function X(){y({title:"你想选中那些行",content:U,onOk:()=>{i.value==="radio"?n.value.selectRow(w):n.value.selectRow(g.value)}})}function J(){y({title:"按条件主动选择",content:i.value==="radio"?"将选中id为80的那一行":"将选中id大于79的行",onOk:()=>{i.value==="radio"?n.value.selectRow(e=>e.id===80):n.value.selectRow(e=>e.id>79)}})}return(e,t)=>(Q(),H(te,null,[l(L),x("div",de,[l(ue),x("div",me,[l(o(Z),{ref_key:"btTab",ref:n,columns:T,url:o(N),"search-data":o(R),"show-top-row":"",radio:o(i)==="radio",selection:o(i)==="checkbox",showTotal:!1,draggable:!0,"table-empty-td-handle":"",border:"",onOnRowClick:W,onOnDataChange:A,onOnDragDrop:M},{topMsg:f(()=>[k("共有："+Y(o(C))+" 条数据。",1)]),topBtnGroup:f(()=>[x("div",fe,[l(o(c.RadioGroup),{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=a=>S(i)?i.value=a:null),style:{"margin-right":"20px"},onOnChange:E},{default:f(()=>[l(o(c.Radio),{label:"radio"},{default:f(()=>[k("单选")]),_:1}),l(o(c.Radio),{label:"checkbox"},{default:f(()=>[k("多选")]),_:1})]),_:1},8,["modelValue"]),l(o(c.Checkbox),{modelValue:o(d),"onUpdate:modelValue":t[1]||(t[1]=a=>S(d)?d.value=a:null),onOnChange:D},{default:f(()=>[k("切换为node-serve数据(需开启项目nodeJs服务器)")]),_:1},8,["modelValue"]),l(o(v),{name:"select row",icon:"md-checkbox",onClick:X}),l(o(v),{name:"select function",icon:"md-checkbox",onClick:J}),l(o(v),{name:"get select",icon:"md-list",onClick:q}),l(o(v),{name:"新增",icon:"md-add",onClick:F}),l(o(v),{name:"打印",icon:"md-print",onClick:j})])]),_:1},8,["url","search-data","radio","selection"])])]),l(o(ee),{title:o(h),ref_key:"formModalRef",ref:m,"form-data":P,"form-rules":G,onOnSubmit:I},null,8,["title"])],64))}}),ge=re(pe,[["__scopeId","data-v-381278fd"]]);export{ge as default};
//# sourceMappingURL=BtTablePageEX-Dp25yKgx.js.map
